import{m as S,u as N,r as p,j as e,A as y}from"./index-e439054e.js";import{B as C}from"./Basic3dViewPanel-6892a15b.js";import{B as o}from"./Button-fcf173b3.js";import{I as j}from"./Input-605e6434.js";import{L as x}from"./Label-4a29d029.js";import"./OrbitControls-945b1259.js";import"./constants-81f60586.js";const k=S.div,w=a=>`${a}_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,I=({scene:a,isActive:n,onClick:m})=>e.jsxs("button",{onClick:m,className:`w-full p-3 text-left rounded-lg border-l-4 transition-all duration-200 ${n?"bg-slate-700 border-primary":"bg-slate-800/50 border-slate-600 hover:bg-slate-700/50"}`,children:[e.jsx("h4",{className:"font-semibold text-white truncate",children:a.title||"Untitled Scene"}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:a.narrative||"No narrative."}),e.jsxs("div",{className:"text-right text-xs text-slate-500 mt-1",children:[a.duration,"s"]})]}),B=()=>{var f,v;const a=N(),{currentProject:n,updateCurrentProject:m}=a,t=p.useMemo(()=>n==null?void 0:n.storyboard,[n]),[i,h]=p.useState(((f=t==null?void 0:t.scenes[0])==null?void 0:f.id)||null),r=p.useMemo(()=>t==null?void 0:t.scenes.find(s=>s.id===i),[t,i]),u=s=>{m({storyboard:s})},b=()=>{const s={id:w("scene"),title:`New Scene ${t?t.scenes.length+1:1}`,narrative:"",cameraViewId:null,duration:5},l=t?{...t,scenes:[...t.scenes,s]}:{id:w("storyboard"),title:"Main Storyboard",scenes:[s]};u(l),h(s.id)},g=()=>{var l;if(!t||!i)return;const s=t.scenes.filter(c=>c.id!==i);u({...t,scenes:s}),h(((l=s[0])==null?void 0:l.id)||null)},d=s=>{if(!t||!i)return;const l=t.scenes.map(c=>c.id===i?{...c,...s}:c);u({...t,scenes:l})};return e.jsxs("div",{className:"w-screen h-screen flex flex-col bg-black text-white",children:[e.jsxs("header",{className:"h-16 px-6 flex-shrink-0 flex justify-between items-center border-b border-slate-800",children:[e.jsxs("h1",{className:"text-xl font-bold",children:["Storyboard Engine: ",e.jsx("span",{className:"text-slate-400",children:n==null?void 0:n.name})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(o,{variant:"outline",size:"sm",children:"Play Full Sequence"}),e.jsx(o,{variant:"secondary",size:"sm",onClick:()=>a.setView("auraOS"),children:"Exit to Studio"})]})]}),e.jsxs("main",{className:"flex-grow flex overflow-hidden",children:[e.jsxs("div",{className:"w-1/4 max-w-xs flex-shrink-0 border-r border-slate-800 flex flex-col",children:[e.jsx("div",{className:"p-4 flex-shrink-0",children:e.jsx(o,{onClick:b,className:"w-full",children:"Add Scene"})}),e.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-3",children:t==null?void 0:t.scenes.map(s=>e.jsx(I,{scene:s,isActive:i===s.id,onClick:()=>h(s.id)},s.id))})]}),e.jsx("div",{className:"flex-grow",children:e.jsx(C,{...a})}),e.jsx("div",{className:"w-1/3 max-w-md flex-shrink-0 border-l border-slate-800 flex flex-col",children:e.jsx(y,{mode:"wait",children:r?e.jsxs(k,{className:"flex-grow flex flex-col p-6 space-y-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("h3",{className:"text-lg font-semibold text-primary",children:"Scene Editor"}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"scene-title",children:"Title"}),e.jsx(j,{id:"scene-title",value:r.title,onChange:s=>d({title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"scene-narrative",children:"Narrative / Script"}),e.jsx("textarea",{id:"scene-narrative",rows:8,value:r.narrative,onChange:s=>d({narrative:s.target.value}),className:"w-full mt-1 p-2 text-sm bg-input rounded-md"})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"scene-camera",children:"Camera View"}),e.jsxs("select",{id:"scene-camera",value:r.cameraViewId||"",onChange:s=>d({cameraViewId:s.target.value||null}),className:"w-full mt-1 p-2 bg-input rounded-md",children:[e.jsx("option",{value:"",children:"-- Select Camera --"}),(v=a.savedCameraViews)==null?void 0:v.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"scene-duration",children:"Duration (seconds)"}),e.jsx(j,{id:"scene-duration",type:"number",value:r.duration,onChange:s=>d({duration:parseInt(s.target.value)||0})})]}),e.jsx("div",{className:"mt-auto pt-4 flex-shrink-0",children:e.jsx(o,{variant:"destructive",onClick:g,children:"Delete Scene"})})]},i):e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:e.jsx("p",{children:"Select a scene or create a new one to begin."})})})})]})]})};export{B as default};
