import{u as v,r as p,j as e,a as g,L as y}from"./index-e439054e.js";import{u as N,c as P}from"./authService-2d4415af.js";import{B as f}from"./Button-fcf173b3.js";import{I as x}from"./Input-605e6434.js";import{L as c}from"./Label-4a29d029.js";import"./constants-81f60586.js";const C=({user:s,onUpdate:d})=>{const[r,m]=p.useState({name:s.name||"",profession:s.profession||"",bio:s.bio||"",phoneNumber:s.phoneNumber||"",whatsappOptIn:s.whatsappOptIn||!1}),[n,h]=p.useState(!1),{addNotification:o}=g(),t=i=>{const{name:l,value:u,type:b}=i.target,j=i.target.checked;m(w=>({...w,[l]:b==="checkbox"?j:u}))},a=async i=>{i.preventDefault(),h(!0);try{await N(r),o("Profile updated successfully!","success"),d()}catch(l){o(`Error: ${l.message}`,"error")}finally{h(!1)}};return e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Profile Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"name",children:"Full Name"}),e.jsx(x,{id:"name",name:"name",value:r.name,onChange:t})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"profession",children:"Profession"}),e.jsx(x,{id:"profession",name:"profession",value:r.profession,onChange:t,placeholder:"e.g., Architect, Designer"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"bio",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",rows:3,value:r.bio,onChange:t,className:"w-full p-2 bg-slate-700 border border-slate-600 rounded-md text-sm",placeholder:"Tell us a little about yourself..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(x,{id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:t,placeholder:"+91..."})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[e.jsx("input",{type:"checkbox",id:"whatsappOptIn",name:"whatsappOptIn",checked:r.whatsappOptIn,onChange:t,className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx(c,{htmlFor:"whatsappOptIn",children:"Receive WhatsApp updates"})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs(f,{type:"submit",disabled:n,children:[n&&e.jsx(y,{size:"h-4 w-4 mr-2"})," Save Changes"]})})]})},k=({user:s,onUpdate:d})=>{const[r,m]=p.useState({isProfilePublic:s.isProfilePublic||!1,portfolioUrl:s.portfolioUrl||"",linkedInUrl:s.linkedInUrl||""}),[n,h]=p.useState(!1),{addNotification:o}=g(),t=i=>{const{name:l,value:u,type:b,checked:j}=i.target;m(w=>({...w,[l]:b==="checkbox"?j:u}))},a=async i=>{i.preventDefault(),h(!0);try{await N(r),o("Public profile settings updated!","success"),d()}catch(l){o(`Error: ${l.message}`,"error")}finally{h(!1)}};return e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Public Showcase Profile"}),e.jsxs("div",{className:"p-4 bg-slate-700/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(c,{htmlFor:"isProfilePublic",className:"font-semibold text-slate-200",children:"Make my profile public"}),e.jsx("input",{type:"checkbox",id:"isProfilePublic",name:"isProfilePublic",checked:r.isProfilePublic,onChange:t,className:"h-5 w-5 rounded text-primary bg-slate-600 border-slate-500 focus:ring-primary"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Allows other users to see your name, bio, and public projects in the Community Showcase."})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"portfolioUrl",children:"Portfolio URL"}),e.jsx(x,{id:"portfolioUrl",name:"portfolioUrl",value:r.portfolioUrl,onChange:t,placeholder:"https://your-portfolio.com"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"linkedInUrl",children:"LinkedIn URL"}),e.jsx(x,{id:"linkedInUrl",name:"linkedInUrl",value:r.linkedInUrl,onChange:t,placeholder:"https://linkedin.com/in/your-profile"})]}),e.jsx("div",{className:"text-right",children:e.jsxs(f,{type:"submit",disabled:n,children:[n&&e.jsx(y,{size:"h-4 w-4 mr-2"})," Save Settings"]})})]})},S=()=>{const[s,d]=p.useState({currentPassword:"",newPassword:""}),[r,m]=p.useState(""),[n,h]=p.useState(!1),[o,t]=p.useState(null),{addNotification:a}=g(),i=async l=>{if(l.preventDefault(),s.newPassword!==r){t("New passwords do not match.");return}t(null),h(!0);try{await P(s),a("Password changed successfully!","success"),d({currentPassword:"",newPassword:""}),m("")}catch(u){t(u.message)}finally{h(!1)}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Change Password"}),o&&e.jsx("p",{className:"text-sm text-red-400",children:o}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx(x,{id:"currentPassword",type:"password",value:s.currentPassword,onChange:l=>d(u=>({...u,currentPassword:l.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"newPassword",children:"New Password"}),e.jsx(x,{id:"newPassword",type:"password",value:s.newPassword,onChange:l=>d(u=>({...u,newPassword:l.target.value})),required:!0,minLength:6})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(c,{htmlFor:"confirmNewPassword",children:"Confirm New Password"}),e.jsx(x,{id:"confirmNewPassword",type:"password",value:r,onChange:l=>m(l.target.value),required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsxs(f,{type:"submit",disabled:n,children:[n&&e.jsx(y,{size:"h-4 w-4 mr-2"})," Update Password"]})})]}),e.jsxs("div",{className:"border-t border-red-500/30 pt-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-red-400",children:"Danger Zone"}),e.jsxs("div",{className:"mt-4 p-4 border border-red-500/50 bg-red-900/20 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-200",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Permanently delete your account and all associated data. This action cannot be undone."})]}),e.jsx(f,{variant:"destructive",onClick:()=>alert("Account deletion is a critical operation. This button is a placeholder."),children:"Delete My Account"})]})]})]})},A=()=>{const{currentUser:s,setProfilePageOpen:d,setBuyCreditsModalOpen:r,refreshCurrentUser:m}=v(a=>({currentUser:a.currentUser,setProfilePageOpen:a.setProfilePageOpen,setBuyCreditsModalOpen:a.setBuyCreditsModalOpen,refreshCurrentUser:a.refreshCurrentUser})),[n,h]=p.useState("profile");if(!s)return null;const o=({tabId:a,children:i})=>e.jsx("button",{onClick:()=>h(a),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${n===a?"bg-sky-600 text-white":"hover:bg-slate-700 text-slate-300"}`,children:i}),t=()=>{switch(n){case"profile":return e.jsx(C,{user:s,onUpdate:m});case"public_profile":return e.jsx(k,{user:s,onUpdate:m});case"security":return e.jsx(S,{});default:return null}};return e.jsx("div",{className:"fixed inset-0 bg-slate-900 bg-opacity-75 flex items-center justify-center z-[100]",onClick:()=>d(!1),role:"dialog","aria-modal":"true","aria-labelledby":"profile-modal-title",children:e.jsxs("div",{className:"bg-slate-800 p-0 rounded-xl shadow-2xl w-full max-w-4xl m-4 h-[90vh] max-h-[800px] flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-700 flex-shrink-0",children:[e.jsx("h2",{id:"profile-modal-title",className:"text-2xl font-bold text-sky-300",children:"Account Settings"}),e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-sky-300 transition-colors","aria-label":"Close profile modal",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-7 h-7",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex flex-grow overflow-hidden",children:[e.jsxs("nav",{className:"w-1/4 border-r border-slate-700 p-4 flex-shrink-0 flex flex-col gap-1",children:[e.jsx(o,{tabId:"profile",children:"Profile"}),e.jsx(o,{tabId:"public_profile",children:"Public Showcase"}),e.jsx(o,{tabId:"security",children:"Security"}),e.jsx("div",{className:"mt-auto pt-4 border-t border-slate-700",children:e.jsx(f,{onClick:()=>r(!0),className:"w-full bg-amber-500 hover:bg-amber-400 text-slate-900",children:"Buy Credits"})})]}),e.jsx("main",{className:"flex-grow overflow-y-auto p-6 md:p-8",children:t()})]})]})})};export{A as default};
