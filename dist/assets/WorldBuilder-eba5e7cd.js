import{j as e,u as b,r as t,G as C}from"./index-e439054e.js";import{V as m,F as M}from"./ViewPanelCard-780dac58.js";import{B as N}from"./Basic3dViewPanel-6892a15b.js";import{A as L,B as R,S as T,C as B}from"./CollaborationModal-7cfc9c99.js";import{ExportModal as O}from"./ExportModal-0b83a680.js";import"./index.min-45331c48.js";import"./constants-81f60586.js";import"./OrbitControls-945b1259.js";import"./projectService-1550175d.js";import"./authService-2d4415af.js";import"./DakshinVaarahiLogo-2a42c54f.js";const V=[{id:"select",title:"Select & Modify",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2.5m6-6a1.5 1.5 0 00-3 0v6a1.5 1.5 0 003 0m-3-6a1.5 1.5 0 013 0v2.5m0 0a1.5 1.5 0 013 0m-3-6a1.5 1.5 0 013 0v6a1.5 1.5 0 01-3 0m6-2.5v-2.5a1.5 1.5 0 013 0v2.5"})})},{id:"zone",title:"Draw Zone",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})})},{id:"road",title:"Draw Road",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}],y=({activeTool:o,onToolChange:r})=>e.jsx("div",{className:"absolute top-20 left-4 z-30 flex flex-col gap-2 p-2 bg-slate-800/80 backdrop-blur-md rounded-lg border border-slate-700",children:V.map(s=>e.jsx("button",{onClick:()=>r(s.id),title:s.title,className:`p-3 rounded-md transition-colors ${o===s.id?"bg-sky-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:s.icon},s.id))}),Z=()=>{const o=b(),r=t.useRef(null),s=t.useRef(null),[n,i]=t.useState(!1),[u,d]=t.useState(!1),{currentProject:a,isExportModalOpen:h,setExportModalOpen:x,activeSketcherTool:c,setActiveSketcherTool:p,saveProjectVersion:v,editorMode:f,setEditorMode:j,addZone:w,addInfrastructure:k,updateWall:S}=o,g=async l=>{await v(l)};return e.jsxs("div",{className:"relative w-screen h-screen overflow-hidden bg-slate-900",children:[e.jsx(L,{}),e.jsx("main",{className:"w-full h-full pt-20 pb-20 px-4",children:e.jsxs("div",{className:"flex h-full gap-4",children:[e.jsx("div",{className:"w-2/3 h-full",children:e.jsx(m,{title:"2D Master Plan",children:e.jsx(M,{ref:r,...o,currentTool:c,setActiveSketcherTool:p,editorMode:f,setEditorMode:j,addZone:w,addInfrastructure:k,updateWall:S})})}),e.jsx("div",{className:"w-1/3 h-full",children:e.jsx(m,{title:"3D Site Visualization",children:e.jsx(N,{ref:s,...o})})})]})}),e.jsx(y,{activeTool:c,onToolChange:l=>p(l)}),e.jsx(R,{onSaveClick:()=>d(!0),onShareClick:()=>i(!0),cinematicTourReady:!!o.cinematicTourData,onPlayTour:()=>o.setIsCinematicTourPlaying(!0),canUndo:o.canUndo,canRedo:o.canRedo,onUndo:o.undo,onRedo:o.redo}),u&&e.jsx(T,{onClose:()=>d(!1),onSave:g}),h&&a&&e.jsx(O,{onClose:()=>x(!1),sketcherRef:r,view3dRef:s,projectName:(a==null?void 0:a.name)||"Untitled"}),n&&a&&e.jsx(t.Suspense,{fallback:e.jsx(C,{message:"Loading..."}),children:e.jsx(B,{isOpen:n,onClose:()=>i(!1),projectId:a.id,initialCollaborators:o.collaborators,onCollaboratorsUpdate:o.setCollaborators})})]})};export{Z as default};
