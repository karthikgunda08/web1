import{r as a,j as e,L as g}from"./index-e439054e.js";import{M as j,a as y,b as w,c as S}from"./Modal-78058900.js";import{B as v}from"./Button-fcf173b3.js";import{I as M}from"./Input-605e6434.js";import{g as b}from"./geminiService-f982c15c.js";import"./constants-81f60586.js";import"./authService-2d4415af.js";const B=({onClose:x})=>{const[d,o]=a.useState([{id:1,text:"Hello! How can I help you with AuraOS today?",sender:"ai"}]),[r,c]=a.useState(""),[n,u]=a.useState(!1),p=a.useRef(null),m=()=>{var s;(s=p.current)==null||s.scrollIntoView({behavior:"smooth"})};a.useEffect(m,[d]);const f=async s=>{if(s.preventDefault(),!r.trim()||n)return;const h={id:Date.now(),text:r,sender:"user"};o(t=>[...t,h]),c(""),u(!0);try{const{text:t}=await b(r),i={id:Date.now()+1,text:t,sender:"ai"};o(l=>[...l,i])}catch(t){const i={id:Date.now()+1,text:`Sorry, I encountered an error: ${t.message}`,sender:"ai"};o(l=>[...l,i])}finally{u(!1)}};return e.jsxs(j,{onClose:x,className:"max-w-md",children:[e.jsx(y,{children:e.jsx(w,{children:"AI Support Agent"})}),e.jsxs(S,{className:"flex flex-col h-[70vh]",children:[e.jsxs("div",{className:"flex-grow overflow-y-auto pr-2 space-y-4 mb-4",children:[d.map(s=>e.jsx("div",{className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs px-4 py-2 rounded-2xl ${s.sender==="user"?"bg-primary text-primary-foreground":"bg-secondary"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.text})})},s.id)),n&&e.jsx("div",{className:"flex justify-start",children:e.jsx(g,{size:"h-5 w-5"})}),e.jsx("div",{ref:p})]}),e.jsxs("form",{onSubmit:f,className:"flex gap-2",children:[e.jsx(M,{value:r,onChange:s=>c(s.target.value),placeholder:"Ask about AuraOS..."}),e.jsx(v,{type:"submit",disabled:n,children:"Send"})]})]})]})};export{B as default};
