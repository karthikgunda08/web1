import{u as b,r as c,j as e}from"./index-e439054e.js";import{B as g}from"./Button-fcf173b3.js";const H=o=>`${o}_${Date.now()}_${Math.random().toString(36).substring(2,7)}`,y=()=>{const{isHotspotEditorOpen:o,hotspotEditorTarget:a,setHotspotEditorOpen:p,currentProject:u,updateHolocronHotspots:h}=b(),s=u==null?void 0:u.holocron,[r,x]=c.useState(""),[d,m]=c.useState(""),[f,v]=c.useState("narrative"),n=a==null?void 0:a.existingHotspotId;c.useEffect(()=>{if(o&&n){const t=s==null?void 0:s.hotspots.find(l=>l.id===n);t&&(x(t.title),m(t.content),v(t.type))}else x(""),m(""),v("narrative")},[o,n,s]);const j=()=>{if(!r||!d||!a)return;const t=(s==null?void 0:s.hotspots)||[];let l;if(n)l=t.map(i=>i.id===n?{...i,title:r,content:d,type:f}:i);else{const i={id:H("hotspot"),title:r,content:d,type:f,position:a.position};l=[...t,i]}h(l),p(!1)};return o?e.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-[150]",onClick:()=>p(!1),children:e.jsxs("div",{className:"bg-card border border-border shadow-lg w-full max-w-lg m-4 rounded-xl p-6",onClick:t=>t.stopPropagation(),children:[e.jsxs("h2",{className:"text-lg font-bold text-sky-300 mb-4",children:[n?"Edit":"Add"," Holocron Hotspot"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Title"}),e.jsx("input",{type:"text",value:r,onChange:t=>x(t.target.value),className:"w-full p-2 bg-input rounded-md mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Type"}),e.jsxs("select",{value:f,onChange:t=>v(t.target.value),className:"w-full p-2 bg-input rounded-md mt-1",children:[e.jsx("option",{value:"narrative",children:"Narrative"}),e.jsx("option",{value:"render",children:"Render URL"}),e.jsx("option",{value:"document",children:"Document URL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm",children:"Content"}),e.jsx("textarea",{value:d,onChange:t=>m(t.target.value),rows:5,className:"w-full p-2 bg-input rounded-md mt-1"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(g,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),e.jsx(g,{onClick:j,children:"Save Hotspot"})]})]})}):null};export{y as default};
